(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{1010:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:c?24*Number(i)/Number(a):i,className:l("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:c,...o}=r;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return r.displayName=a(e),r}},1890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(2115),l=r(4033),n=r(7937),i=r(9847),c=r(1010),o=r(1360),d=r(6191),m=r(2198),u=r(5229);let x=()=>{let[e,t]=(0,a.useState)([]),[r,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(new Set),[v,f]=(0,a.useState)(null),[N,w]=(0,a.useState)({name:"",description:"",parent_category:"",is_active:!0,sort_order:0});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/admin/categories/",{credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let r=await e.json();t(r.results||r||[])}else throw Error("Failed to fetch categories")}catch(e){console.error("Error fetching categories:",e),f("Failed to load categories"),t([])}},C=async e=>{e.preventDefault(),b(!0),f(null);try{let e=h?"/api/admin/categories/".concat(h.id,"/"):"/api/admin/categories/",t=h?"PATCH":"POST",r=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(r.ok)await k(),_(),alert(h?"Category updated successfully!":"Category created successfully!");else{let e=await r.json();console.error("Error:",e),f("Error saving category. Please check the form.")}}catch(e){console.error("Error:",e),f("Network error. Please try again.")}finally{b(!1)}},A=async(e,t)=>{if(confirm('Are you sure you want to delete "'.concat(t,'"? This will also delete all subcategories.')))try{(await fetch("/api/admin/categories/".concat(e,"/"),{method:"DELETE",credentials:"include"})).ok?(await k(),alert("Category deleted successfully!")):alert("Error deleting category. Make sure it has no products assigned.")}catch(e){console.error("Error:",e),alert("Network error. Please try again.")}},_=()=>{x(!1),p(null),w({name:"",description:"",parent_category:"",is_active:!0,sort_order:0}),f(null)},E=e=>{let{name:t,value:r,type:s}=e.target,a=e.target.checked;w(e=>({...e,[t]:"checkbox"===s?a:r}))},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 hover:bg-neutral-50 ".concat(t>0?"bg-neutral-25":""),style:{paddingLeft:"".concat(16+24*t,"px")},children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[e.subcategories.length>0&&(0,s.jsx)("button",{onClick:()=>(e=>{let t=new Set(y);t.has(e)?t.delete(e):t.add(e),j(t)})(e.id),className:"p-1 hover:bg-neutral-200 rounded",children:y.has(e.id)?(0,s.jsx)(l.A,{className:"w-4 h-4 text-neutral-600"}):(0,s.jsx)(n.A,{className:"w-4 h-4 text-neutral-600"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.A,{className:"w-5 h-5 text-primary-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-neutral-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-neutral-600",children:[e.product_count||0," products",e.description&&" â€¢ ".concat(e.description.substring(0,50)).concat(e.description.length>50?"...":"")]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"}),(0,s.jsx)("button",{onClick:()=>{p(e),w({name:e.name,description:e.description,parent_category:e.parent_category||"",is_active:e.is_active,sort_order:e.sort_order}),x(!0)},className:"p-2 text-neutral-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",children:(0,s.jsx)(c.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>A(e.id,e.name),className:"p-2 text-neutral-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})]}),y.has(e.id)&&e.subcategories.length>0&&(0,s.jsx)("div",{children:S(e.subcategories,t+1)})]},e.id))},M=e.filter(e=>!e.parent_category);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Category Management"}),(0,s.jsx)("p",{className:"text-neutral-600 mt-1",children:"Manage product categories and subcategories"})]}),(0,s.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Add Category"]})]}),v&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-red-800",children:v})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-primary-50 p-3 rounded-lg",children:(0,s.jsx)(i.A,{className:"w-6 h-6 text-primary-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Total Categories"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:e.length})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:(0,s.jsx)(m.A,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Parent Categories"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:M.length})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsx)(i.A,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Subcategories"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:e.filter(e=>e.parent_category).length})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-orange-50 p-3 rounded-lg",children:(0,s.jsx)(i.A,{className:"w-6 h-6 text-orange-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Active Categories"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:e.filter(e=>e.is_active).length})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-neutral-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-neutral-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:"Category Hierarchy"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Click the arrows to expand/collapse subcategories"})]}),e.length>0?(0,s.jsx)("div",{children:M.length>0?S(M):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(i.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Only subcategories found"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-4",children:"Create some parent categories to organize your products."}),(0,s.jsx)("button",{onClick:()=>x(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Create Parent Category"})]})}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(i.A,{className:"w-12 h-12 text-neutral-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No categories yet"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-4",children:"Start by creating your first product category."}),(0,s.jsx)("button",{onClick:()=>x(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Create First Category"})]})]}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:h?"Edit Category":"Add New Category"}),(0,s.jsx)("button",{onClick:_,className:"p-2 hover:bg-neutral-100  rounded-lg transition-colors duration-200",children:(0,s.jsx)(u.A,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("form",{onSubmit:C,className:"p-6",children:[v&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,s.jsx)("p",{className:"text-red-800",children:v})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",name:"name",value:N.name,onChange:E,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Living Room, Bedroom, Office",required:!0}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"The URL slug will be automatically generated from the name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:N.description,onChange:E,rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Brief description of this category..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Parent Category"}),(0,s.jsxs)("select",{name:"parent_category",value:N.parent_category,onChange:E,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"None (Top Level Category)"}),M.filter(e=>!h||e.id!==h.id).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"Leave empty to create a top-level category, or select a parent to create a subcategory"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Sort Order"}),(0,s.jsx)("input",{type:"number",name:"sort_order",value:N.sort_order,onChange:E,className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0",min:"0"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"Lower numbers appear first. Categories with the same order are sorted alphabetically."})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"is_active",id:"is_active",checked:N.is_active,onChange:E,className:"mr-3 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"text-sm text-neutral-700",children:"Active (visible to customers)"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-neutral-200",children:[(0,s.jsx)("button",{type:"button",onClick:_,className:"px-4 py-2 text-neutral-600 hover:text-neutral-800 font-medium",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"bg-blue-600 hover:bg-primary-700 disabled:bg-blue-600 text-white font-semibold px-6 py-2 rounded-lg transition-colors duration-200",children:g?"Saving...":h?"Update Category":"Create Category"})]})]})]})})]})}},2198:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},4033:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5145:(e,t,r)=>{Promise.resolve().then(r.bind(r,1890))},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7937:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9847:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])}},e=>{e.O(0,[441,255,358],()=>e(e.s=5145)),_N_E=e.O()}]);